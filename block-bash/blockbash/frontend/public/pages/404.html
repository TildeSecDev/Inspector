<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-i18n="title">404 Not Found</title>
  <link href="https://fonts.googleapis.com/css2?family=Tomorrow:wght@400;600;700&family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/welcome.css" />
  <link rel="stylesheet" href="/css/rtl.css" />
  <style>
    body { background:#4e5dc1; font-family:'Kanit',sans-serif; }
    .lost-wrapper { position:relative; display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; overflow:hidden; text-align:center; padding:2rem; }
    .scan-noise { position:absolute; inset:0; background:repeating-linear-gradient(0deg,rgba(255,255,255,0.04) 0 2px,transparent 2px 4px); mix-blend-mode:overlay; pointer-events:none; animation:noiseMove 6s linear infinite; }
    @keyframes noiseMove { from { transform:translateY(0);} to { transform:translateY(-50%);} }
    h1 { font-family:'Tomorrow',sans-serif; font-size:clamp(2.5rem,6vw,6rem); margin:0 0 .5rem; letter-spacing:2px; text-shadow:0 2px 6px rgba(0,0,0,0.4); }
    .subtitle { font-size:clamp(1rem,2.2vw,1.5rem); opacity:0.9; margin:0 0 2rem; font-weight:300; }
    .message-rotator { position:relative; display:inline-block; padding:.75rem 1rem; background:rgba(0,0,0,0.25); border:1px solid rgba(255,255,255,0.2); border-radius:8px; max-width:880px; backdrop-filter:blur(4px); font-family:'Tomorrow',sans-serif; }
    .progress-bar { position:absolute; left:0; bottom:0; height:3px; background:#ffc857; width:0%; transition:width .12s linear; }
    .bg-streams { position:absolute; inset:0; display:flex; flex-direction:column; gap:6vh; opacity:0.09; font-family:'Tomorrow',sans-serif; font-weight:700; line-height:1; pointer-events:none; }
    .bg-row { font-size:18vh; white-space:nowrap; animation:rowLeft 32s linear infinite; }
    .bg-row:nth-child(even) { animation:rowRight 32s linear infinite; }
    @keyframes rowLeft { from { transform:translateX(0);} to { transform:translateX(-50%);} }
    @keyframes rowRight { from { transform:translateX(-50%);} to { transform:translateX(0);} }
    .actions { margin-top:2.5rem; display:flex; gap:1rem; flex-wrap:wrap; justify-content:center; }
    .actions a { text-decoration:none; background:#272f70; color:#fff; padding:.85rem 1.25rem; border-radius:6px; font-family:'Tomorrow',sans-serif; font-weight:600; letter-spacing:.5px; transition:background .25s, transform .25s; border:1px solid rgba(255,255,255,0.15); }
    .actions a:hover { background:#313c8c; transform:translateY(-2px); }
    #language-select { position:fixed; top:10px; right:10px; z-index:20; }
    body.rtl .actions a { letter-spacing:0; }
  </style>
  <script defer src="/js/i18n.js"></script>
</head>
<body data-page="404">
  <select id="language-select">
    <option value="english">EN</option>
    <option value="spanish">ES</option>
    <option value="german">DE</option>
    <option value="french">FR</option>
    <option value="arabic">AR</option>
  </select>
  <div class="lost-wrapper">
    <div class="bg-streams" aria-hidden="true">
      <div class="bg-row">404 • NOT FOUND • 404 • NOT FOUND • 404 • NOT FOUND •</div>
      <div class="bg-row">TRANSMISSION LOST • 404 • SIGNAL LOST • 404 •</div>
      <div class="bg-row">404 • NOT FOUND • 404 • NOT FOUND • 404 • NOT FOUND •</div>
    </div>
    <div class="scan-noise"></div>
    <h1 data-i18n="title">404 Not Found</h1>
    <p class="subtitle" id="warning-text" data-i18n="warning">WARNING: UNEXPECTED INCOMING TRANSMISSION FROM SERVER</p>
    <div class="message-rotator">
      <span id="rotating-msg"></span>
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    <div class="actions">
      <a href="/" data-i18n="actions.home">Return Home</a>
      <a href="/pages/welcome.html" data-i18n="actions.login">Login</a>
      <a href="/pages/index.html" data-i18n="actions.editor">Open Editor</a>
    </div>
  </div>
  <script>
    // After i18n loads, messages array will be available (page namespace -> page 404 json)
    function init404Messages(){
      const map = window.__i18nMap || {};
      // Our loader merges page namespace at root for current page
      const msgs = map.messages || (Array.isArray(map['messages']) ? map['messages'] : []);
      window.__404Messages = msgs;
    }
    document.addEventListener('i18n:applied', init404Messages);
    // Fallback if event not dispatched (legacy) – run late
    setTimeout(()=>{ if(!window.__404Messages) init404Messages(); }, 400);

    const rotatingEl = document.getElementById('rotating-msg');
    const progressBar = document.getElementById('progress-bar');
    let idx = 0; let progress = 0; const DURATION = 6000; const STEP_MS = 60;
    function tick(){
      const msgs = window.__404Messages || [];
      if(!rotatingEl.dataset.initialized){
        rotatingEl.dataset.initialized = '1';
        if(msgs.length) rotatingEl.textContent = msgs[0];
      }
      progress += STEP_MS;
      const pct = Math.min(100, (progress / DURATION) * 100);
      progressBar.style.width = pct + '%';
      if(progress >= DURATION){
        progress = 0;
        if(msgs.length){ idx = (idx + 1) % msgs.length; rotatingEl.textContent = msgs[idx]; }
      }
    }
    setInterval(tick, STEP_MS);
  </script>
</body>
</html>
