{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Containerlab Node Schema",
  "description": "Schema for containerlab node/device definition",
  "type": "object",
  "required": ["id", "name", "kind", "properties"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the node"
    },
    "name": {
      "type": "string",
      "description": "Human-readable name for the device",
      "minLength": 1,
      "maxLength": 63,
      "pattern": "^[a-zA-Z0-9_-]+$"
    },
    "kind": {
      "type": "string",
      "enum": ["linux", "rare", "docker", "bridge", "host"],
      "description": "Node type/kind"
    },
    "image": {
      "type": "string",
      "description": "Docker image reference"
    },
    "properties": {
      "type": "object",
      "description": "Node configuration properties",
      "properties": {
        "exec": {
          "type": "array",
          "items": { "type": "string" },
          "description": "List of commands to execute on startup"
        },
        "env": {
          "type": "object",
          "additionalProperties": { "type": "string" },
          "description": "Environment variables"
        },
        "binds": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Volume binds in format /host:/container"
        },
        "IP": {
          "type": "string",
          "description": "IPv4 address with CIDR notation",
          "pattern": "^([0-9]{1,3}\\.){3}[0-9]{1,3}/[0-9]{1,2}$"
        },
        "GW": {
          "type": "string",
          "description": "Default gateway IP address",
          "pattern": "^([0-9]{1,3}\\.){3}[0-9]{1,3}$"
        }
      }
    },
    "ui": {
      "type": "object",
      "description": "UI representation properties",
      "properties": {
        "icon": {
          "type": "string",
          "description": "Icon name/identifier"
        },
        "color": {
          "type": "string",
          "description": "Hex color code",
          "pattern": "^#[0-9A-Fa-f]{6}$"
        },
        "category": {
          "type": "string",
          "enum": ["router", "server", "client", "attacker", "network"],
          "description": "Device category for UI organization"
        },
        "position": {
          "type": "object",
          "properties": {
            "x": { "type": "number" },
            "y": { "type": "number" }
          }
        }
      }
    },
    "configurableFields": {
      "type": "array",
      "items": { "type": "string" },
      "description": "List of fields editable in the UI"
    }
  }
}
